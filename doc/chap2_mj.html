<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<title>GAP (SemigroupViz) - Chapter 2: Egg-Box Diagrams</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="generator" content="GAPDoc2HTML" />
<link rel="stylesheet" type="text/css" href="manual.css" />
<script src="manual.js" type="text/javascript"></script>
<script type="text/javascript">overwriteStyle();</script>
</head>
<body class="chap2"  onload="jscontent()">


<div class="chlinktop"><span class="chlink1">Goto Chapter: </span><a href="chap0_mj.html">Top</a>  <a href="chap1_mj.html">1</a>  <a href="chap2_mj.html">2</a>  <a href="chap3_mj.html">3</a>  <a href="chap4_mj.html">4</a>  <a href="chapInd_mj.html">Ind</a>  </div>

<div class="chlinkprevnexttop">&nbsp;<a href="chap0_mj.html">[Top of Book]</a>&nbsp;  <a href="chap0_mj.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap1_mj.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap3_mj.html">[Next Chapter]</a>&nbsp;  </div>

<p id="mathjaxlink" class="pcenter"><a href="chap2.html">[MathJax off]</a></p>
<p><a id="X7B2312BB8303BC71" name="X7B2312BB8303BC71"></a></p>
<div class="ChapSects"><a href="chap2_mj.html#X7B2312BB8303BC71">2 <span class="Heading">Egg-Box Diagrams</span></a>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap2_mj.html#X79F61C3F861AA03A">2.1 <span class="Heading">Preliminaries: Green's relations</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap2_mj.html#X800D21DB7942D5D3">2.2 <span class="Heading">Generating egg-box diagrams</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap2_mj.html#X79CBEC4084A1E9EA">2.3 <span class="Heading">Formatting element names</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap2_mj.html#X80846AC97D6BD461">2.4 <span class="Heading">Interacting with egg-box diagrams</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X864DA9CA7D972C0F">2.4-1 <span class="Heading">Generating only a portion of a diagram</span></a>
</span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap2_mj.html#X7E3E281378553E39">2.4-2 <span class="Heading">Expanding and contracting diagrams</span></a>
</span>
</div></div>
</div>

<h3>2 <span class="Heading">Egg-Box Diagrams</span></h3>

<p><a id="X79F61C3F861AA03A" name="X79F61C3F861AA03A"></a></p>

<h4>2.1 <span class="Heading">Preliminaries: Green's relations</span></h4>

<p>Let <span class="SimpleMath">\(S\)</span> be a semigroup and let <span class="SimpleMath">\(S^1\)</span> be the monoid corresponding to <span class="SimpleMath">\(S\)</span>, which is the same as <span class="SimpleMath">\(S\)</span> plus an identity element if and only if <span class="SimpleMath">\(S\)</span> doesn't already have one. Write <span class="SimpleMath">\(S^1a\)</span> for the principal left ideal generated by any element <span class="SimpleMath">\(a\in S\)</span>, which is the set <span class="SimpleMath">\(\left\{ sa \mid s\in S^1 \right\}\)</span>. Similarly, we let <span class="SimpleMath">\(aS^1\)</span> mean <span class="SimpleMath">\(\left\{ as \mid s\in S^1 \right\}\)</span>, a principal right ideal, and <span class="SimpleMath">\(S^1aS^1\)</span> mean <span class="SimpleMath">\(\left\{ sas' \mid s,s'\in S^1 \right\}\)</span>, a principal two-sided ideal.</p>

<p>We are now in a position to define Green's relations, which are what define how an "egg-box diagram" is structured. Each of the five relations defined below, <span class="SimpleMath">\(L,R,J,D,H\)</span>, is a binary equivalence relation on <span class="SimpleMath">\(S\)</span> (although the definitions use the ideals given above, which leverage <span class="SimpleMath">\(S^1\)</span>). We do not prove here that these are equivalence relations; consider this just the preliminaries needed to define the visualization.</p>


<ul>
<li><p>Let <span class="SimpleMath">\(aLb\)</span> hold iff <span class="SimpleMath">\(aS^1=bS^1\)</span>.</p>

</li>
<li><p>Let <span class="SimpleMath">\(aRb\)</span> hold iff <span class="SimpleMath">\(S^1a=S^1b\)</span>.</p>

</li>
</ul>
<p>Because these are equivalence relations, if we have some <span class="SimpleMath">\(a\in S\)</span>, we may refer to its equivalence class under <span class="SimpleMath">\(L\)</span> or <span class="SimpleMath">\(R\)</span> by <span class="SimpleMath">\([a]_L\)</span> or <span class="SimpleMath">\([a]_R\)</span>, respectively.</p>


<ul>
<li><p>Let <span class="SimpleMath">\(aJb\)</span> hold iff <span class="SimpleMath">\(S^1aS^1=S^1bS^1\)</span>.</p>

</li>
<li><p>Let <span class="SimpleMath">\(aHb\)</span> hold iff <span class="SimpleMath">\(aLb\)</span> and <span class="SimpleMath">\(aRb\)</span>.</p>

</li>
<li><p>Let <span class="SimpleMath">\(aDb\)</span> hold iff <span class="SimpleMath">\([a]_R\cap[b]_L\neq\emptyset\)</span>.</p>

</li>
</ul>
<p>The coarsest of these five relations is <span class="SimpleMath">\(D\)</span> and for any given <span class="SimpleMath">\(a,b\in S\)</span>, if any of <span class="SimpleMath">\(aLb,aRb,aJb,aHb\)</span> holds then <span class="SimpleMath">\(aDb\)</span> holds.</p>

<p>Within any given <span class="SimpleMath">\(D\)</span>-class, the relations <span class="SimpleMath">\(L\)</span> and <span class="SimpleMath">\(R\)</span> function on different "axes" so to speak. All <span class="SimpleMath">\([a]_L\)</span> within a given <span class="SimpleMath">\(D\)</span>-class are the same size; the same holds for all <span class="SimpleMath">\([a]_R\)</span> in each <span class="SimpleMath">\(D\)</span>-class. And because <span class="SimpleMath">\(H\)</span> is defined as the conjunction of <span class="SimpleMath">\(L\)</span> and <span class="SimpleMath">\(R\)</span>, the parts of its partition are just the intersections of <span class="SimpleMath">\([a]_L\)</span> and <span class="SimpleMath">\([a]_R\)</span> classes. This happens uniformly within each <span class="SimpleMath">\(D\)</span>-class, so all <span class="SimpleMath">\(H\)</span>-classes in a <span class="SimpleMath">\(D\)</span>-class have the same size.</p>

<p>This suggests dividing up the semigroup into <span class="SimpleMath">\(D\)</span>-classes, then dividing each <span class="SimpleMath">\(D\)</span>-class into <span class="SimpleMath">\(H\)</span>-classes, organized into a table of rows and columns with the rows corresponding to <span class="SimpleMath">\(R\)</span>-classes and the columns to <span class="SimpleMath">\(L\)</span>-classes. Each <span class="SimpleMath">\(D\)</span>-class is a grid of little bins (the <span class="SimpleMath">\(H\)</span>-classes), which gives rise to the notion of an "egg box" (or "egg carton"), since they, too, are grids of little bins.</p>

<p><center><img height="200" src="real-egg-box.png"/><br>Image in the public domain</center></p>

<p><a id="X800D21DB7942D5D3" name="X800D21DB7942D5D3"></a></p>

<h4>2.2 <span class="Heading">Generating egg-box diagrams</span></h4>

<p>As an example, consider the semigroup of non-invertible transformations generated by the six idempotents of degree 3 and rank 2, which you can compute with the following <strong class="pkg">GAP</strong> code.</p>


<div class="example"><pre>
LoadPackage( "semigroups" );
S := SingularTransformationSemigroup( 3 );
</pre></div>

<p>Then its egg-box diagram looks like the following.</p>

<p><center><img height="300" src="example-diagram.png"/></center></p>

<p>The diagram is clearly composed of two distinct components, each of which is a grid of cells, and thus each is like an "egg box."</p>

<p>This image was generated using this package. If you have already executed the code above to define the semigroup <code class="code">S</code>, you could generate an image of the same semigroup with the following code.</p>


<div class="example"><pre>
LoadPackage( "semigroupviz" );
ShowEggBoxDiagram( S );
</pre></div>

<p>(Technically, that code will generate a much more verbose figure. See the Section <a href="chap2_mj.html#X79CBEC4084A1E9EA"><span class="RefLink">2.3</span></a> for details.)</p>

<p>Note the following structure within that image.</p>


<ul>
<li><p>Each large block is a <span class="SimpleMath">\(D\)</span>-class.</p>

</li>
<li><p>Each row within a <span class="SimpleMath">\(D\)</span>-class is an <span class="SimpleMath">\(R\)</span>-class.</p>

</li>
<li><p>Each column within a <span class="SimpleMath">\(D\)</span>-class is an <span class="SimpleMath">\(L\)</span>-class.</p>

</li>
<li><p>Each cell within a <span class="SimpleMath">\(D\)</span>-class is an <span class="SimpleMath">\(H\)</span>-class.</p>

</li>
<li><p>Each line within an <span class="SimpleMath">\(H\)</span>-class cell is an element of that <span class="SimpleMath">\(H\)</span>-class. In this particular case, each element is represented as a list of positive integers. For example, the first element of the first <span class="SimpleMath">\(H\)</span>-class is <code class="code">[ 1, 2, 2 ]</code>.</p>

</li>
</ul>
<p>The figure below summarizes these facts visually.</p>

<p><center><img height="300" src="label-example-diagram.png"/></center></p>

<p><a id="X79CBEC4084A1E9EA" name="X79CBEC4084A1E9EA"></a></p>

<h4>2.3 <span class="Heading">Formatting element names</span></h4>

<p>If the elements of your semigroup have a compact representation, then the <code class="func">ShowEggBoxDiagram</code> (<a href="chap4_mj.html#X869B627A7C0B3464"><span class="RefLink">4.1-1</span></a>) function introduced in Section <a href="chap2_mj.html#X800D21DB7942D5D3"><span class="RefLink">2.2</span></a> will produce readable diagrams. But if the elements of the semigroup have very long names, then each <span class="SimpleMath">\(H\)</span>-class will be very wide, making the diagram less compact and readable.</p>

<p>To solve this problem, you can provide a function that maps elements of your semigroup to whatever (typically more compact) notation you'd like to use in the diagram. You pass this as one of the options to <code class="func">ShowEggBoxDiagram</code> (<a href="chap4_mj.html#X869B627A7C0B3464"><span class="RefLink">4.1-1</span></a>), under the name <code class="code">ToString</code>.</p>

<p>For instance, the elements of the semigroup shown in Section <a href="chap2_mj.html#X800D21DB7942D5D3"><span class="RefLink">2.2</span></a> are <code class="code">Transformation</code>s, which can be shown compactly by converting them to a list and then from there to a string. The image in that section was made with the following code.</p>


<div class="example"><pre>
ShowEggBoxDiagram(
  SingularTransformationSemigroup( 3 ),
  rec( ToString := elt -&gt; String( ListTransformation( elt ) ) )
);
</pre></div>

<p>Detailed documentation of all the options of the <code class="func">ShowEggBoxDiagram</code> (<a href="chap4_mj.html#X869B627A7C0B3464"><span class="RefLink">4.1-1</span></a>) function can be found in its documentation in Section <a href="chap4_mj.html#X7ECCCA82839EA283"><span class="RefLink">4</span></a>.</p>

<p><a id="X80846AC97D6BD461" name="X80846AC97D6BD461"></a></p>

<h4>2.4 <span class="Heading">Interacting with egg-box diagrams</span></h4>

<p>Semigroups can be of arbitrary size, and if they become too large, then diagrams become infeasible or unhelpful to view. Thus this package provides some ways to compute only a portion of a diagram or to hide sections of a diagram as needed. This section of the manual covers these features.</p>

<p><a id="X864DA9CA7D972C0F" name="X864DA9CA7D972C0F"></a></p>

<h5>2.4-1 <span class="Heading">Generating only a portion of a diagram</span></h5>

<p>In the documentation for <code class="func">ShowEggBoxDiagram</code> (<a href="chap4_mj.html#X869B627A7C0B3464"><span class="RefLink">4.1-1</span></a>), you can see that the options object permits you to provide options entitled <code class="code">NrDClassesIncluded</code>, <code class="code">NrRClassesIncludedPerDClass</code>, <code class="code">NrLClassesIncludedPerRClass</code>, and <code class="code">NrElementsIncludedPerHClass</code>. These options govern how much data should be computed by <strong class="pkg">GAP</strong> and included in the HTML that shows the egg-box diagram.</p>

<p>The purpose of these features should be clear by considering a semigroup containing more than one billion elements. (Such semigroups are easy to create with a single function call in <strong class="pkg">GAP</strong>.) Each element takes several bytes to represent, and thus the HTML generated to display such a semigroup would be many gigabytes of data. And yet humans cannot visually process every one of the billion elements, so we just want to see the overall structure of the semigroup. Thus it is not necessary for <strong class="pkg">GAP</strong> to create HTML containing every detail of every <span class="SimpleMath">\(H\)</span>-class and all its elements. It would be sufficient to include several example <span class="SimpleMath">\(D\)</span>-classes, each with several example rows and columns, and each resulting <span class="SimpleMath">\(H\)</span>-class showing several example elements.</p>

<p>You can govern just how many <span class="SimpleMath">\(D\)</span>-, <span class="SimpleMath">\(L\)</span>-, and <span class="SimpleMath">\(R\)</span>-classes are included in the generated diagram, as well as how many elements are included in each <span class="SimpleMath">\(H\)</span>-class, using the options mentioned above. The diagram will make it clear, when you are viewing it, that there are additional elements not available for viewing, because <strong class="pkg">GAP</strong> did not provide them to the web page to display.</p>

<p>Even after executing the code to generate a diagram, the viewer has control over how many of each type of class is displayed. The top right hand corner of the diagram contains a settings icon and clicking it reveals a set of controls like those shown below. (Clicking it again hides them.)</p>

<p><center><img height="450" src="egg-box-settings.png"/></center></p>

<p>On the left, you can see a slider that controls how many <span class="SimpleMath">\(D\)</span>-classes are shown, as described in Section <a href="chap2_mj.html#X7E3E281378553E39"><span class="RefLink">2.4-2</span></a>. Its minimum is one and maximum is the number of <span class="SimpleMath">\(D\)</span>-classes <strong class="pkg">GAP</strong> provided when generating the diagram. In this case, that maximum is four, which is also the actual number of <span class="SimpleMath">\(D\)</span>-classes in the semigroup. (If it were not, the diagram would include an obvious warning about the missing data; see below.)</p>

<p>You can also see options for when to show the headings in an <span class="SimpleMath">\(H\)</span>-class, as documented in Section <a href="chap2_mj.html#X7E3E281378553E39"><span class="RefLink">2.4-2</span></a>.</p>

<p>On the right, you can see a box that lets you customize the settings for each <span class="SimpleMath">\(D\)</span>-class separately. Choosing a <span class="SimpleMath">\(D\)</span>-class from the drop-down list at the top of that section updates all the controls below to reflect the settings you last specified for that class.</p>

<p>The sliders function as described in Section <a href="chap2_mj.html#X7E3E281378553E39"><span class="RefLink">2.4-2</span></a>. The minimum for each is always one but the maximum is determined by the data included in the diagram by <strong class="pkg">GAP</strong>. This may be the actual number of <span class="SimpleMath">\(L\)</span>- or <span class="SimpleMath">\(R\)</span>-classes in the semigroup, or the actual number of elements in an <span class="SimpleMath">\(H\)</span>-class, or it may be less than that number if <strong class="pkg">GAP</strong> provided only a subset of the semigroup when generating the diagram's data.</p>

<p>In that latter case, the interface makes it obvious, as you can see with the bright blue box at the bottom right of the above image. It warns the user that the <span class="SimpleMath">\(H\)</span>-class slider has a maximum of 20 because the <strong class="pkg">GAP</strong> code that generated this diagram included only 20 elements per <span class="SimpleMath">\(H\)</span>-class, even though there are actually 24 elements per <span class="SimpleMath">\(H\)</span>-class in this particular <span class="SimpleMath">\(D\)</span>-class in the semigroup itself.</p>

<p>No such bright blue boxes appear under the sliders for the <span class="SimpleMath">\(R\)</span>- or <span class="SimpleMath">\(L\)</span>-classes, meaning that in this particular <span class="SimpleMath">\(D\)</span>-class, every <span class="SimpleMath">\(R\)</span>- and <span class="SimpleMath">\(L\)</span>-class in the semigroup has been provided by <strong class="pkg">GAP</strong> to the diagram for viewing.</p>

<p>If you want to make such warnings go away, so that all (or at least more) elements are included in the diagram, you must regenerate the diagram with another call to <code class="func">ShowEggBoxDiagram</code> (<a href="chap4_mj.html#X869B627A7C0B3464"><span class="RefLink">4.1-1</span></a>), this time providing larger values for the relevant option(s), <code class="code">NrDClassesIncluded</code>, <code class="code">NrRClassesIncludedPerDClass</code>, <code class="code">NrLClassesIncludedPerRClass</code>, and/or <code class="code">NrElementsIncludedPerHClass</code>.</p>

<p><a id="X7E3E281378553E39" name="X7E3E281378553E39"></a></p>

<h5>2.4-2 <span class="Heading">Expanding and contracting diagrams</span></h5>

<p>While viewing an egg-box diagram, the following interactive options are available to you.</p>

<p>If you show the settings controls documented in Section <a href="chap2_mj.html#X864DA9CA7D972C0F"><span class="RefLink">2.4-1</span></a>, then you can interact with those controls as follows.</p>


<ul>
<li><p>The slider entitled "Show this many <span class="SimpleMath">\(D\)</span>-classes:" can be dragged to show or hide <span class="SimpleMath">\(D\)</span>-classes. The diagram updates as you drag the slider. If you move this slider below its maximum, then a note is included at the bottom right of the diagram, indicating that there are other <span class="SimpleMath">\(D\)</span>-classes not shown.</p>

<p>Regardless of whether the settings controls are shown or hidden, you can click such a message to expose all available hidden <span class="SimpleMath">\(D\)</span>-classes. To reverse such an action, use the slider.</p>

</li>
</ul>
<p><center><img height="225" src="more-D-classes.png"/></center></p>


<ul>
<li><p>The radio buttons allow you to choose when to include a heading in <span class="SimpleMath">\(H\)</span>-classes:</p>


<ul>
<li><p>Always: Every <span class="SimpleMath">\(H\)</span>-class in the diagram will begin with a heading stating its size, such as "15 elements:".</p>

</li>
<li><p>Never: No <span class="SimpleMath">\(H\)</span>-class in the diagram will begin with a heading; only the elements are shown.</p>

</li>
<li><p>When needed: Each <span class="SimpleMath">\(H\)</span>-class in the diagram is treated separately. A heading stating the number of elements is omitted if and only if all elements are shown. That is, the diagram reports the number of elements only if it cannot be deduced visually from the cell.</p>

</li>
</ul>
</li>
<li><p>The drop-down list entitled "Choose a <span class="SimpleMath">\(D\)</span>-class by representative:" is present because the right-hand section of the diagram settings are not global, but local within each <span class="SimpleMath">\(D\)</span>-class. First choose the <span class="SimpleMath">\(D\)</span>-class whose settings you will edit, then proceed to adjust those settings with the controls beneath the drop-down list. Choosing a new <span class="SimpleMath">\(D\)</span>-class updates the controls to reflect the settings you've already set for that class.</p>

</li>
<li><p>The slider for the number of <span class="SimpleMath">\(R\)</span>-classes to show determines the number of rows that will be shown in the chosen <span class="SimpleMath">\(D\)</span>-class. If you do not choose to show all <span class="SimpleMath">\(R\)</span>-classes in the <span class="SimpleMath">\(D\)</span>-class, then the <span class="SimpleMath">\(D\)</span>-class will end with an ellipsis and a message indicating that there are some <span class="SimpleMath">\(R\)</span>-classes not shown.</p>

<p>Regardless of whether the settings controls are shown or hidden, you can click such a message to expose all available hidden <span class="SimpleMath">\(R\)</span>-classes within a <span class="SimpleMath">\(D\)</span>-class. To reverse such an action, use the slider.</p>

</li>
</ul>
<p><center><img height="300" src="more-R-classes.png"/></center></p>


<ul>
<li><p>The slider for the number of <span class="SimpleMath">\(L\)</span>-classes to show determines the number of columns that will be shown in the chosen <span class="SimpleMath">\(D\)</span>-class. If you do not choose to show all <span class="SimpleMath">\(L\)</span>-classes in the <span class="SimpleMath">\(D\)</span>-class, then each row will end with an ellipsis and a message indicating that there are some <span class="SimpleMath">\(L\)</span>-classes not shown.</p>

<p>Regardless of whether the settings controls are shown or hidden, you can click such a message to expose all available hidden <span class="SimpleMath">\(L\)</span>-classes within a <span class="SimpleMath">\(D\)</span>-class. To reverse such an action, use the slider.</p>

</li>
</ul>
<p><center><img height="300" src="more-L-classes.png"/></center></p>


<ul>
<li><p>The slider for the number of elements to show determines the number of lines that will be shown in each cell (<span class="SimpleMath">\(H\)</span>-class) of the chosen <span class="SimpleMath">\(D\)</span>-class. If you do not choose to show all elements in each <span class="SimpleMath">\(H\)</span>-class, then each cell will end with an ellipsis indicating that there are some elements not shown.</p>

<p>Regardless of whether the settings controls are shown or hidden, you can click such a message to expose all available hidden elements within an <span class="SimpleMath">\(H\)</span>-class. To reverse such an action, use the slider.</p>

</li>
</ul>
<p><center><img height="225" src="more-H-elements.png"/></center></p>

<p>There are other ways to interact with the diagram using your mouse, independent of the settings controls. These features function whether the settings controls are open or closed.</p>


<ul>
<li><p>Hovering your mouse over any cell in the diagram will list all the elements included in that <span class="SimpleMath">\(H\)</span>-class, even if not all are currently being shown in the cell. This way you can keep the diagram of a manageable size for high-level viewing, but drill down by hovering on any given cell.</p>

</li>
<li><p>Clicking on the elements shown in any cell in the diagram will expand just that cell to include all known elements in that <span class="SimpleMath">\(H\)</span>-class. Clicking again will collapse it to show just the number you've chosen in the settings, as indicated above.</p>

</li>
</ul>

<div class="chlinkprevnextbot">&nbsp;<a href="chap0_mj.html">[Top of Book]</a>&nbsp;  <a href="chap0_mj.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap1_mj.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap3_mj.html">[Next Chapter]</a>&nbsp;  </div>


<div class="chlinkbot"><span class="chlink1">Goto Chapter: </span><a href="chap0_mj.html">Top</a>  <a href="chap1_mj.html">1</a>  <a href="chap2_mj.html">2</a>  <a href="chap3_mj.html">3</a>  <a href="chap4_mj.html">4</a>  <a href="chapInd_mj.html">Ind</a>  </div>

<hr />
<p class="foot">generated by <a href="http://www.math.rwth-aachen.de/~Frank.Luebeck/GAPDoc">GAPDoc2HTML</a></p>
</body>
</html>
